<!-- Launch Google Maps -->
<% provide :head_tags do %>
<meta name="turbolinks-visit-control" content="reload">
<script>
	document.addEventListener("DOMContentLoaded", function () {
		initMap(
				<% @mission.addresses.each do | address | %>
					<%= "#{address.coordonnee}, " unless address.coordonnee.nil? %>
				<% end %>
			);
	});
</script>
<% end %>

<<<<<<< HEAD
 <section class="slice-xl sct-color-1">
 	<div class="container">
 		<div class="row align-items cols-xs-space cols-sm-space cols-md-space">
 			<div class="col-lg-8 ml-lg-auto order-lg-2">
 				<div class="px-inline-only-2">
 					<h3 class="heading heading-2 strong-500">
 						Description :
						 <hr class="mt-0 mb-0">
 					</h3>
=======
<section class="slice-xl sct-color-1">
	<div class="container">
		<div class="row align-items cols-xs-space cols-sm-space cols-md-space">
			<div class="col-lg-8 ml-lg-auto order-lg-2">
				<div class="px-inline-only-2">
					<h3 class="heading heading-2 strong-500">
						Description :
						<hr class="mt-0 mb-0">
					</h3>
>>>>>>> user_stories

					<p class="text-lg line-height-1_8 mt-4">
						<h5>
							<%= @mission.description %>
						</h5>
					</p>
				</div>

				<div class="px-inline-only-2">
					<h3 class="heading heading-2 strong-500">
						Lieux :
						<hr class="mt-0 mb-0">
					</h3>

<<<<<<< HEAD
 					
 					<p class="text-lg line-height-1_8 mt-4">  
 					<ul>   
 					<% @mission.addresses.each do |address| %>    
 						<li>
 							<%= address.street_name_1 %>, 
 							<%= address.postal_code %> - <%= address.city %> 
 						</li>
 					<% end %>
 					</ul>
          			</p>	
 				</div>
 				<% @mission.addresses.each do |address| %>
		              <!--The div element for the map -->
		              <div id="map"></div>
		              <script>
		                // Initialize and add the map
		                function initMap() {
		                  // The location of Uluru
		                  var station_f = {lat: 48.833921, lng: 2.371345};
		                  var station_f2 = <%= address.coordonnee %>;
		                  // The map, centered at Uluru
		                  var map = new google.maps.Map(
		                  document.getElementById('map'), {zoom: 17, center: station_f2});
		                  // The marker, positioned at Uluru
		                  var marker = new google.maps.Marker({position: station_f, map: map});
		                  var marker = new google.maps.Marker({position: station_f2, map: map});
		                }
		              </script>
		              <script async defer
		              src="https://maps.googleapis.com/maps/api/js?key=<%= Rails.application.credentials[:google_key] %>&callback=initMap">
		          </script>
				<% end %>
				<div class="" id="map"></div> <!-- Google Map -->
 			</div>

 			<div class="col-lg-3 order-lg-1 no-border">
 				<div class="">
 					<div class="progress-wrapper">
 						<h4 class="progress-label text-capitalize text-md strong-600">Nom:</h4>
 						<h4> <%= @mission.name %> </h4>
 						<hr class="mt-0 mb-0">
 					</div>
					<div class="progress-wrapper mt-4">
 						<h4 class="progress-label text-capitalize text-md strong-600">Crée le:</h4>
 						<h4> <%= @mission.created_at %> </h4>
 						<hr class="mt-0 mb-0">
 					</div>
 					<% if @mission.due_date %>
 					<div class="progress-wrapper mt-4">
 						<h4 class="progress-label text-capitalize text-md strong-600">Date Limite:</h4>
 						<h4><%=  time_tag(@mission.due_date) %>
 					</div>
 					<% end %>
				 </div>
=======

					<p class="text-lg line-height-1_8 mt-4">
						<ul>
							<% @mission.addresses.each do |address| %>
							<li>
								<%= address.street_name_1 %>,
								<%= address.postal_code %> -
								<%= address.city %>
							</li>
							<% end %>
						</ul>
					</p>
					<div class="" id="map"></div> <!-- Google Map -->
				</div>
			</div>

			<div class="col-lg-4 order-lg-1 border">
				<div class="">
					<div class="progress-wrapper">
						<h4 class="progress-label text-capitalize text-md strong-600">Nom:</h4>
						<h4>
							<%= @mission.name %>
						</h4>
						<hr class="mt-0 mb-0">
					</div>
					<div class="progress-wrapper mt-4">
						<h4 class="progress-label text-capitalize text-md strong-600">Crée le:</h4>
						<h4>
							<%= @mission.created_at %>
						</h4>
						<hr class="mt-0 mb-0">
					</div>
					<% if @mission.due_date %>
					<div class="progress-wrapper mt-4">
						<h4 class="progress-label text-capitalize text-md strong-600">Date Limite:</h4>
						<h4>
							<%=  time_tag(@mission.due_date) %>
					</div>
					<% end %>
					<% @mission.addresses.each do |address| %>
					<div class="progress-wrapper mt-4">
						<h4 class="progress-label text-capitalize text-md strong-600">Lieux:</h4>
						<h4>
							<%= address.street_name_1 %>
						</h4>
						<h4>
							<%= address.postal_code %> -
							<%= address.city %>
						</h4>
					</div>
					<% end %>
				</div>
>>>>>>> user_stories

				<% if current_member.role == "super_admin" || current_member.role == "admin" || current_member.id == Mission.find(params[:id]).author_id  %>

<<<<<<< HEAD
				 <%= link_to  "Éditer", edit_mission_path(@mission.id), class: "btn btn-base-1 btn-shadow btn-circle px-4 mb-4 mt-4" %>
				 <%= link_to 'Suprimer', mission_path(@mission.id), method: :delete, class: "btn btn-danger btn-shadow btn-circle px-4 mb-4 mt-4" %>

				 <% end %>
 			</div>
 		</div>
 		 <div class="row align-items-center pt-5 ml-2">
		<div class="col-6">
			<%= link_to " Retour", missions_path, class: "fas fa-arrow-left" %>
=======
				<%= link_to  "Éditer", edit_mission_path(@mission.id), class: "btn btn-success" %>
				<%= link_to 'Suprimer', mission_path(@mission.id), method: :delete, class: "btn btn-danger" %>

				<% end %>
			</div>
		</div>
		<div class="row align-items-center pt-5 ml-2">
			<div class="col-6">
				<%= link_to " Retour", missions_path, class: "fas fa-arrow-left" %>
			</div>
>>>>>>> user_stories
		</div>
	</div>
</section>