<div class="col-lg-12 mb-5">
    <div class="main-content">
        <!-- Page title -->
        <div class="page-title">
            <div class="row align-items-center">
                <div class="col-lg-12 col-12">
                    <h2 class="heading-missions heading heading heading-2 text-uppercase border-bottom border-dark strong-800 mt-5 mb-5">missions</h2>
                </div>
            </div>
        </div>
        <%= link_to  "CrÃ©er une nouvelle mission", new_mission_path, class:"btn btn-primary" %>
        <!-- Order history table -->
        <div class="card no-border">
            <div>
                <table class="table table-sm table-hover">
                    <thead>
                        <tr>
                            <th>Nom</th>
                            <th>Date Creation</th>
                            <th>Date Limite</th>
                            <th><!-- Btn Show --></th>
                        </tr>
                    </thead>
                    <tbody>
                        <% @missions.each do |mission| %>
                        <tr>

                            <td><%= mission.name %></td>

                            <td><%= mission.created_at %></td>
                            <td><%= mission.due_date %></td>
                            <td><% mission.addresses.each do |address| %>
                                <%= address.city %> 
                            <% end %></td>
                            <td>
                                <%= link_to "Voir", mission_path(mission.id), class: "btn btn-dark" %>
                            </td>
                        </tr>
                        <% end %>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


            <div class="col-md-8 ">
              <!--The div element for the map -->
              <div id="map"></div>
              <script>
                // Initialize and add the map
                function initMap() {
                  // The location of Uluru
                  var creil = {lat: 49.2667, lng: 2.4833};
                  // The map, centered at Uluru
                  var map = new google.maps.Map(
                  document.getElementById('map'), {zoom: 10, center: creil});
                  // The marker, positioned at Uluru
                <% @missions.each do |mission| %>
                    <% mission.addresses.each do |address| %>
                        var marker = new google.maps.Marker({position: <%= address.coordonnee %>, map: map});
                    <% end %>
                <% end %>
                }
              </script>
              <!--Load the API from the specified URL
              * The async attribute allows the browser to render the page while the API loads
              * The key parameter will contain your own API key (which is not needed for this tutorial)
              * The callback parameter executes the initMap() function-->
              <script async defer
                src="https://maps.googleapis.com/maps/api/js?key=<%= Rails.application.credentials[:google_key] %>&callback=initMap">
            </script>
            </div>